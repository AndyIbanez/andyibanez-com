<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.70.0" />

    
    
    

<title>Understanding Property Wrappers in Swift • Andy Ibanez</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Understanding Property Wrappers in Swift"/>
<meta name="twitter:description" content="Learn and understand what Property Wrappers are in Swift and how to use them."/>

<meta property="og:title" content="Understanding Property Wrappers in Swift" />
<meta property="og:description" content="Learn and understand what Property Wrappers are in Swift and how to use them." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.andyibanez.com/posts/understanding-property-wrappers-swift/" />
<meta property="article:published_time" content="2019-11-27T07:00:00-04:00" />
<meta property="article:modified_time" content="2019-11-27T07:00:00-04:00" /><meta property="og:site_name" content="Andy Ibanez - iOS Developer" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.e4368406c047b72036bd31fdf69f74f805156724914c166a0accb2369a218b61.css" integrity="sha256-5DaEBsBHtyA2vTH99p90&#43;AUVZySRTBZqCsyyNpohi2E=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    <script data-ad-client="ca-pub-3640551804216350" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-146179797-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://www.andyibanez.com">Andy Ibanez</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/196dd48d2ac425661edf58028d499370?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Software Developer from La Paz, Bolivia. Programming for iOS since 2011. 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Andy Ibanez</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/tags/wwdc2020/">
						<span>WWDC 2020</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/projects/">
						<span>Projects</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About Me</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/privacy-policy/">
						<span>Privacy Policy</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/AndyIbanezK" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://facebook.com/AndyIbanezCom" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/andyibanez" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	<a href="https://instagram.com/andyibanez" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/andr%c3%a9s-iba%c3%b1ez-30234033" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/648767" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://keybase.io/andyibanez" rel="me"><i class="fab fa-keybase fa-lg" aria-hidden="true"></i></a>
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2021 Andrés Ibañez
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Understanding Property Wrappers in Swift</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Nov 27, 2019
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/development">DEVELOPMENT</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/swift">swift</a>
           
      
          <a class="badge badge-tag" href="/tags/programming">programming</a>
           
      
          <a class="badge badge-tag" href="/tags/apple">apple</a>
           
      
          <a class="badge badge-tag" href="/tags/property-wrappers">property wrappers</a>
           
      
          <a class="badge badge-tag" href="/tags/wwdc2019">wwdc2019</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 6 min read
</div>


  </header>
  
  
  <div class="post">
    <p>Swift 5.1 introduced a sleuth of wonderful features, and amongst them, there&rsquo;s one that is essential for SwiftUI: Property Wrappers. Property wrappers are a powerful feature in Swift that allow you to wrap behavior along with properties. This allows us to do some interesting things. If you have seen SwiftUI, you&rsquo;ve seen the <code>@State</code> &ldquo;keyword&rdquo;, and you know that it allows you to modify structs. This is possible thanks to the behavior &ldquo;wrapped&rdquo; within properties marked with it.</p>
<p>But <code>@State</code> isn&rsquo;t really a keyword. It&rsquo;s just functionality exposed to us through Property Wrappers, and just like SwiftUI provides <code>@State</code>, <code>@EnvironmentObject</code>, and more, you can create your own property wrappers for your own use, and they can let you, amongst other things, simplify the code you write and get rid of a lot of boilerplate code. Also, the use of property wrappers is not limited to SwiftUI, and you can find uses for them in any context.</p>
<p>In fewer words, we can define property wrappers as a layer between how a property is stored and the code that defines a property. <!-- raw HTML omitted --><a href="https://docs.swift.org/swift-book/LanguageGuide/Properties.html">1</a><!-- raw HTML omitted --></p>
<p>Property wrappers are useful in any context and you shouldn&rsquo;t constraint yourself in using them only with SwiftUI. In this article we will explore some ideas that can be implemented with property wrappers that can be done without using SwiftUI at all.</p>
<h1 id="a-gotcha">A Gotcha</h1>
<p>Before we get started, it&rsquo;s worth mentioning that you can only apply <em>one</em> property wrapper to a given property at any given time. You cannot, for example, do something like <code>@State @EnvironmentObject var foo = Foo()</code>.</p>
<h1 id="playing-with-property-wrappers">Playing with Property Wrappers</h1>
<h2 id="implementing-your-own-property-wrappers">Implementing Your Own Property Wrappers</h2>
<p>To implement your own property wrapper, you need to do a few things:</p>
<ul>
<li>Declare a struct that will wrap the property.</li>
<li>Mark the struct as a <code>@propertyWrapper</code> before the <code>struct</code> keyword.</li>
<li>Implement the <code>var wrappedValue</code> computed variable. You can use <code>get</code> to get the value of the property, and <code>set</code> to set it. With this, you can see that you can let a property wrapper store its value anywhere.</li>
</ul>
<p>To exemplify this, we will write a simple property wrapper that works with <code>String</code>s and it changes them to uppercase letters.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">@propertyWrapper
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Capitalized</span> {
  <span style="color:#66d9ef">private</span>(<span style="color:#66d9ef">set</span>) <span style="color:#66d9ef">var</span> text: String = <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">var</span> wrappedValue: String {
    <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> text }
    <span style="color:#66d9ef">set</span> { text = newValue.uppercased() }
  }
}
</code></pre></div><p>This is a very simple wrapper with a straight forward task, but the complexity can grow depending on what you want to do.</p>
<p>Our struct <code>Capitalized</code> <em>is</em> our new property wrapper. It will store the string internally in the <code>text</code> property, but this is not a requirement (you could store it in a database, cache, or anywhere else). The <code>wrappedValue</code> property will handle the storage and retrieval for the contents of the property. In this case, when we return the property, we will return the standard property, and when we store it, we will make it an uppercase string. Nothing prevents you from doing it the other way around - storing the string as-is, and returning it as <code>uppercased()</code> -, so feel free to explore and to implement it differently as necessary depending on the context.</p>
<p>Notice that our <code>text</code> variable needs a default value in this case. If you don&rsquo;t set it, you will have problems compiling the code above.</p>
<h2 id="using-custom-property-wrappers">Using Custom Property Wrappers</h2>
<p>Now that we defined our property wrapper, we can finally apply it to members of a struct or class. To show how to do this, we will create a struct called <code>Name</code> that will store the first and last name of someone, and they will be stored in capital letters only:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Name</span> {
  @Capitalized <span style="color:#66d9ef">var</span> firstName: String
  @Capitalized <span style="color:#66d9ef">var</span> lastName: String
}
</code></pre></div><p>And now, when you create an object of this type and set its properties, they will be uppercased when you need them:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> myName = Name()
myName.firstName = <span style="color:#e6db74">&#34;andy&#34;</span>
myName.lastName = <span style="color:#e6db74">&#34;ibanez&#34;</span>
print(myName.firstName) <span style="color:#75715e">// prints &#34;ANDY&#34;</span>
print(myName.lastName) <span style="color:#75715e">// prints &#34;IBANEZ&#34;</span>
</code></pre></div><h2 id="advanced-usage">Advanced Usage</h2>
<p>What we saw above was a very simple wrapper that changes the capitalization of strings. But we can do a few more interesting things with them that open the door to more interesting ideas.</p>
<p>You can, for example, pass in parameters to the wrapper property itself. This allows you to configure how the property should behave on the fly.</p>
<p>As an example, we will write a new property wrapped, <code>ConfigurableCapitalization</code>, that allows us to specify how a <code>String</code> should be capitalized. We can specify if we want it to be <code>uppercased</code>, <code>lowercased</code>, or <code>capitalized</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">@propertyWrapper
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ConfigurableCapitalization</span> {
  
  <span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Settings</span> {
    <span style="color:#66d9ef">case</span> uppercased
    <span style="color:#66d9ef">case</span> capitalized
    <span style="color:#66d9ef">case</span> lowercased
  }
  
  <span style="color:#66d9ef">private</span>(<span style="color:#66d9ef">set</span>) <span style="color:#66d9ef">var</span> text: String = <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">let</span> setting: Settings
  
  <span style="color:#66d9ef">var</span> wrappedValue: String {
    <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> text }
    <span style="color:#66d9ef">set</span> {
      <span style="color:#66d9ef">switch</span> setting {
      <span style="color:#66d9ef">case</span> .capitalized: text = newValue.capitalized
      <span style="color:#66d9ef">case</span> .lowercased: text = newValue.lowercased()
      <span style="color:#66d9ef">case</span> .uppercased: text = newValue.uppercased()
      }
    }
  }
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">FullName</span> {
  @ConfigurableCapitalization(setting: .capitalized) <span style="color:#66d9ef">var</span> firstName: String
  @ConfigurableCapitalization(setting: .uppercased) <span style="color:#66d9ef">var</span> lastName: String
}

<span style="color:#66d9ef">var</span> myFullName = FullName()
myFullName.firstName = <span style="color:#e6db74">&#34;andy&#34;</span>
myFullName.lastName = <span style="color:#e6db74">&#34;ibanez&#34;</span>
print(myFullName.firstName) <span style="color:#75715e">// prints &#34;Andy&#34;</span>
print(myFullName.lastName) <span style="color:#75715e">// prints &#34;IBANEZ&#34;</span>
</code></pre></div><p>First, we create our <code>ConfigurableCapitalization</code> property wrapper, which contains an <code>enum</code> that lets us specify the capitalization of a String. In the setter of the <code>wrappedValue</code>, we instruct the code to store the property in any of the specified capitalization types.</p>
<p>Then we created a <code>FullName</code> object that will store a <code>firstName</code> as a <code>capitalized</code> string (it will capitalize the first letter of each word), and the last name as an <code>uppercased</code> string.</p>
<p>Finally, we assign some values to these property and print their values to the see the results.</p>
<h1 id="projecting-values-from-property-wrappers">Projecting Values from Property Wrappers</h1>
<p>Property wrappers can expose even more functionality through the use of Projected Values. The projected value is implemented as a property in the property wrapper called <code>projectedValue</code>, and it can be of any type you want. You can use this for many things. In our example, we will simply use it to tell us what <code>Setting</code> it used to capitalize the string.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">@propertyWrapper
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ConfigurableCapitalization</span> {
  
  <span style="color:#66d9ef">var</span> projectedValue: Settings = .capitalized
  
  <span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Settings</span> {
    <span style="color:#66d9ef">case</span> uppercased
    <span style="color:#66d9ef">case</span> capitalized
    <span style="color:#66d9ef">case</span> lowercased
  }
  
  <span style="color:#66d9ef">private</span>(<span style="color:#66d9ef">set</span>) <span style="color:#66d9ef">var</span> text: String = <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">let</span> setting: Settings
  
  <span style="color:#66d9ef">var</span> wrappedValue: String {
    <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> text }
    <span style="color:#66d9ef">set</span> {
      <span style="color:#66d9ef">switch</span> setting {
      <span style="color:#66d9ef">case</span> .capitalized: text = newValue.capitalized
      <span style="color:#66d9ef">case</span> .lowercased: text = newValue.lowercased()
      <span style="color:#66d9ef">case</span> .uppercased: text = newValue.uppercased()
      }
      projectedValue = setting
    }
  }
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">print(myFullName.<span style="color:#960050;background-color:#1e0010">$</span>firstName) <span style="color:#75715e">// prints &#34;capitalized&#34;</span>
</code></pre></div><p>If you are storing your values in a database, you can expose the connector object to do something with it, like flush values, or more.</p>
<h1 id="the-downsides">The Downsides</h1>
<p>Property wrappers are an amazing feature, but they have one downside: They provide too much &ldquo;black magic&rdquo; for someone who is not familiar with them. If you handed a new programmer our <code>FullName</code> struct and instructed them to use it, they may be surprised at what&rsquo;s going on behind the scenes. This can only be solved with proper documentation.</p>
<h1 id="conclusion">Conclusion</h1>
<p>Property wrappers are a very interesting Swift feature. While their usage is prominent in SwiftUI, it doesn&rsquo;t have to be. It can be hard to wrap (heh) your head around them at first, but once you take the time to understand them, you can see they offer ways to simplify, reduce boilerplate, or simply wrap a lot of power in a small container.</p>

    <hr>

  <p>If you find any inaccuracies (and that includes typos) or problems in this article please tweet at me (<a href="https://twitter.com/AndyIbanezK" target="_blank">@AndyIbanezK</a>) or send me an e-mail to website[at]andyibanez[dot]com.</p>

  <p>Please do not e-mail to ask me to cross-promote your website or any other soliciting of that kind. AndyIbanez.com is a personal blog, and unless there's a chance to enter a sponsorship relationship with you, I may ignore your message.</p>

  <p>Thank you for helping me improve the quality of my blog!</p>
  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/intercepting-network-mitmproxy/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Intercepting Network Traffic with mitmproxy</span>
    </a>
    
    
    <a href="/posts/nsuserdefaults-property-wrappers/" class="navigation-next">
      <span class="navigation-tittle">UserDefaults and Property Wrappers</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    
        <script src="https://utteranc.es/client.js"
        repo="AndyIbanez/andyibanez-com"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-146179797-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/swift.min.js"></script>
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/objectivec.min.js"></script>
            
        
    
    <script type="text/javascript">
        
        hljs.configure({languages: ["swift, objectivec"]});
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
