<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.70.0" />

    
    
    

<title>Analyzing Natural Language Text with NLTagger • Andy Ibanez</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Analyzing Natural Language Text with NLTagger"/>
<meta name="twitter:description" content="How to use the NLTagger class to analyze natural language text."/>

<meta property="og:title" content="Analyzing Natural Language Text with NLTagger" />
<meta property="og:description" content="How to use the NLTagger class to analyze natural language text." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.andyibanez.com/posts/analyzing-text-nltagger/" />
<meta property="article:published_time" content="2020-02-26T07:00:00-04:00" />
<meta property="article:modified_time" content="2020-02-26T07:00:00-04:00" /><meta property="og:site_name" content="Andy Ibanez - iOS Developer" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.e4368406c047b72036bd31fdf69f74f805156724914c166a0accb2369a218b61.css" integrity="sha256-5DaEBsBHtyA2vTH99p90&#43;AUVZySRTBZqCsyyNpohi2E=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    <script data-ad-client="ca-pub-3640551804216350" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-146179797-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://www.andyibanez.com">Andy Ibanez</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/196dd48d2ac425661edf58028d499370?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Software Developer from La Paz, Bolivia. Programming for iOS since 2011. 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Andy Ibanez</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/tags/wwdc2020/">
						<span>WWDC 2020</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/projects/">
						<span>Projects</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About Me</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/privacy-policy/">
						<span>Privacy Policy</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/AndyIbanezK" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://facebook.com/AndyIbanezCom" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/andyibanez" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	<a href="https://instagram.com/andyibanez" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/andr%c3%a9s-iba%c3%b1ez-30234033" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/648767" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://keybase.io/andyibanez" rel="me"><i class="fab fa-keybase fa-lg" aria-hidden="true"></i></a>
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2021 Andrés Ibañez
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Analyzing Natural Language Text with NLTagger</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Feb 26, 2020
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/development">DEVELOPMENT</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/swift">swift</a>
           
      
          <a class="badge badge-tag" href="/tags/programming">programming</a>
           
      
          <a class="badge badge-tag" href="/tags/apple">apple</a>
           
      
          <a class="badge badge-tag" href="/tags/ios">ios</a>
           
      
          <a class="badge badge-tag" href="/tags/ipados">ipados</a>
           
      
          <a class="badge badge-tag" href="/tags/tvos">tvos</a>
           
      
          <a class="badge badge-tag" href="/tags/watchos">watchos</a>
           
      
          <a class="badge badge-tag" href="/tags/macos">macos</a>
           
      
          <a class="badge badge-tag" href="/tags/natural-language">natural language</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 5 min read
</div>


  </header>
  
  
  <div class="post">
    <p>In the past few weeks, we have explored how we can <a href="https://www.andyibanez.com/posts/tokenizing-nltokenizer/">tokenize natural language text</a> and how to <a href="https://www.andyibanez.com/posts/recognizing-language-nllanguagerecognizer/">recognize the language a natural language text is written in</a>. This week we will continue exploring more natural language APIs provided by the <code>NaturalLanguage</code> framework. We will learn about the <a href="https://developer.apple.com/documentation/naturallanguage/nltagger">NLTagger</a> class, which allows us to to analyze natural language text to find parts of speech, lexical classes, lemma, scripts, and more. This API, introduced in iOS 12, implements machine learning to work, and just like the other <code>NaturalLanguage</code> classes, is very easy to use.</p>
<h1 id="introducing-nltagger">Introducing NLTagger</h1>
<p>NLTagger is the class of the <code>NaturalLanguage</code> framework that allows us to analyze text and find its components. We have explored classes to tokenize text and to detect the language - now it&rsquo;s time to actually do more interesting tasks with the provided text.</p>
<p>When working with <code>NLTagger</code>, you specify the components you are interested in (part of speech, lexical class, etc) by specifying an array of <a href="https://developer.apple.com/documentation/naturallanguage/nltagscheme"><code>NLTagScheme</code></a>.</p>
<h2 id="using-nltagger">Using NLTagger</h2>
<h3 id="using-nltagger-with-simple-words">Using NLTagger With Simple Words</h3>
<p>Define the string you want. Then, create the <code>NLTagger</code> object passing an array of <code>NLTaggerScheme</code>s. In the following example we will define a simple word string, we will analyze all of it, and we are interested in getting its lexical class (The lexical class tells whether the word is a noun, verb, or other grammatical component).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> stringToRecognize = <span style="color:#e6db74">&#34;visit&#34;</span>
<span style="color:#66d9ef">let</span> tagger = NLTagger(tagSchemes: [.lexicalClass])
</code></pre></div><p>Then, assign the string you want to analyze to the tagger&rsquo;s <code>string</code> property. Once you do that, you will be able to get the independent tag:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">tagger.string = stringToRecognize
<span style="color:#66d9ef">let</span> tag = tagger.tag(at: stringToRecognize.startIndex, unit: .word, scheme: .lexicalClass)
</code></pre></div><p>We are getting the tag of a <code>.word</code> unit. In this case, the tag is of type <code>otherWord</code>, because there is not enough context to deduce its lexical class. If you change the word to use the string <code>&quot;visiting&quot;</code>, then the tag will be <code>verb</code>.</p>
<p>As an important aside, you shouldn&rsquo;t this class in a multithreaded environment.</p>
<h3 id="using-nltagger-with-longer-text">Using NLTagger with Longer Text</h3>
<p>We talked about identifying single words, but in a real-world case you are more interested in analyzing longer strings of natural language text. We saw how we could iterate over all the tokens when using <code>NLTokenizer</code>, and the good news is that we can do something very similar with <code>NLTagger</code>.</p>
<p>After you define your string, define the range you want to analyze. You can then use <code>NLTagger</code>s <code>enumerateTags(in:unit:scheme)</code> to go through all of the words:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> stringToRecognize = <span style="color:#e6db74">&#34;I will visit you tonight. The house is empty.&#34;</span>
<span style="color:#66d9ef">let</span> range = stringToRecognize.startIndex ..<span style="color:#f92672">&lt;</span> stringToRecognize.endIndex
<span style="color:#66d9ef">let</span> tagger = NLTagger(tagSchemes: [.lexicalClass])
tagger.string = stringToRecognize
tagger.enumerateTags(<span style="color:#66d9ef">in</span>: range, unit: .word, scheme: .lexicalClass) { (tag, range) -&gt; Bool <span style="color:#66d9ef">in</span>
  print(<span style="color:#e6db74">&#34;Word [</span><span style="color:#e6db74">\(</span>stringToRecognize[range]<span style="color:#e6db74">)</span><span style="color:#e6db74">] : </span><span style="color:#e6db74">\(</span>tag!.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
}
</code></pre></div><p>This will print something like this:</p>
<pre><code>Word [I] : Pronoun
Word [ ] : Whitespace
Word [will] : Verb
Word [ ] : Whitespace
Word [visit] : Verb
Word [ ] : Whitespace
Word [you] : Pronoun
Word [ ] : Whitespace
// ....
</code></pre><p>When it comes to the English language, the <code>whitespace</code> might just be noise and you may not care about it. So we can configure the tagger from excluding some elements:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> options: NLTagger.Options = [.omitPunctuation, .omitWhitespace, .joinNames]
<span style="color:#66d9ef">let</span> tagger = NLTagger(tagSchemes: [.lexicalClass])
tagger.enumerateTags(<span style="color:#66d9ef">in</span>: range, unit: .word, scheme: .lexicalClass, options: options) { (tag, range) -&gt; Bool <span style="color:#66d9ef">in</span>
  print(<span style="color:#e6db74">&#34;Word [</span><span style="color:#e6db74">\(</span>stringToRecognize[range]<span style="color:#e6db74">)</span><span style="color:#e6db74">] : </span><span style="color:#e6db74">\(</span>tag!.rawValue<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
}
</code></pre></div><p>This will correctly ignore all the whitespace characters.</p>
<pre><code>Word [I] : Pronoun
Word [will] : Verb
Word [visit] : Verb
Word [you] : Pronoun
Word [tonight] : Noun
Word [.] : SentenceTerminator
Word [The] : Determiner
Word [house] : Noun
Word [is] : Verb
Word [empty] : Adjective
Word [.] : SentenceTerminator
</code></pre><h3 id="working-with-constrains">Working with Constrains</h3>
<p>Now all languages may support the same tag schemes, so it may be important to know what schemes are supported in certain scenarios. For this, <code>NLTagger</code> has a <code>availableTagSchemes(for:language:)</code> class method.</p>
<p>The following example shows you all the possible tag schemes for English and Japanese:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> enSchemes = NLTagger.availableTagSchemes(<span style="color:#66d9ef">for</span>: .word, language: .english)
print(<span style="color:#e6db74">&#34;English&#34;</span>)
print(enSchemes.map ({ $0.rawValue }))

<span style="color:#66d9ef">let</span> jpSchemes = NLTagger.availableTagSchemes(<span style="color:#66d9ef">for</span>: .word, language: .japanese)
print(<span style="color:#e6db74">&#34;Japanese&#34;</span>)
print(jpSchemes.map ({ $0.rawValue }))
</code></pre></div><pre><code>English
[&quot;Language&quot;, &quot;Script&quot;, &quot;TokenType&quot;, &quot;NameType&quot;, &quot;LexicalClass&quot;, &quot;NameTypeOrLexicalClass&quot;, &quot;Lemma&quot;]
Japanese
[&quot;Language&quot;, &quot;Script&quot;, &quot;TokenType&quot;]
</code></pre><h3 id="utilizing-nltagger-to-perform-sentiment-analysis">Utilizing NLTagger to Perform Sentiment Analysis</h3>
<p>One interesting feature of NLTagger is that it can be used to perform sentiment analysis. If you are not familiar with this term, sentiment analysis is the application of machine learning to learn whether a piece of text can be considered &ldquo;positive&rdquo; or &ldquo;negative&rdquo;.  You can think of it whether a text speaks positively or negatively about something.</p>
<p>To perform sentiment analysis, you need to use the <code>.paragraph</code> unit, and you must also use the <code>.sentimentScore</code> tag scheme. Other than that, its use is pretty straightforward:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> stringToRecognize = <span style="color:#e6db74">&#34;Andy Ibanez is awesome&#34;</span>
<span style="color:#66d9ef">let</span> tagger = NLTagger(tagSchemes: [.sentimentScore])
tagger.string = stringToRecognize
<span style="color:#66d9ef">let</span> (sentimentScoreTag, <span style="color:#66d9ef">_</span>) = tagger.tag(at: stringToRecognize.startIndex, unit: .paragraph, scheme: .sentimentScore)
<span style="color:#66d9ef">let</span> sentimentScore = sentimentScoreTag?.rawValue ?? <span style="color:#e6db74">&#34;0&#34;</span>
print(<span style="color:#e6db74">&#34;Score: </span><span style="color:#e6db74">\(</span>sentimentScore<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><pre><code>0.6
</code></pre><p>The sentiment analysis has a score from -1.0 for negative to 1.0 for positive.</p>
<p>Sentiment Analysis is available on iOS 13 and later.</p>
<h1 id="conclusion">Conclusion</h1>
<p>NLTagger allows you to analyze a piece of natural language text to get its components and understand how a sentence is formed. The analysis can be done in different ways for different languages. We can also perform sentiment analysis on strings starting on iOS 13. NLTagger has many features and it&rsquo;s easy to use.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/recognizing-language-nllanguagerecognizer/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Recognizing the language in a Natural Language Text with NLanguageRecognizer</span>
    </a>
    
    
    <a href="/posts/using-nlembeddings/" class="navigation-next">
      <span class="navigation-tittle">Finding Related Words with NLEmbedding</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    
        <script src="https://utteranc.es/client.js"
        repo="AndyIbanez/andyibanez-com"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-146179797-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/swift.min.js"></script>
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/objectivec.min.js"></script>
            
        
    
    <script type="text/javascript">
        
        hljs.configure({languages: ["swift, objectivec"]});
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
