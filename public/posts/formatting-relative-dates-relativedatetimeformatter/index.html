<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.70.0" />

    
    
    

<title>Formatting Relative Dates With RelativeDateTimeFormatter • Andy Ibanez</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Formatting Relative Dates With RelativeDateTimeFormatter"/>
<meta name="twitter:description" content="Learn how to perform background tasks in your iOS App."/>

<meta property="og:title" content="Formatting Relative Dates With RelativeDateTimeFormatter" />
<meta property="og:description" content="Learn how to perform background tasks in your iOS App." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.andyibanez.com/posts/formatting-relative-dates-relativedatetimeformatter/" />
<meta property="article:published_time" content="2019-12-11T07:00:00-04:00" />
<meta property="article:modified_time" content="2019-12-11T07:00:00-04:00" /><meta property="og:site_name" content="Andy Ibanez - iOS Developer" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.e4368406c047b72036bd31fdf69f74f805156724914c166a0accb2369a218b61.css" integrity="sha256-5DaEBsBHtyA2vTH99p90&#43;AUVZySRTBZqCsyyNpohi2E=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    <script data-ad-client="ca-pub-3640551804216350" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-146179797-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://www.andyibanez.com">Andy Ibanez</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/196dd48d2ac425661edf58028d499370?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Software Developer from La Paz, Bolivia. Programming for iOS since 2011. 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Andy Ibanez</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/tags/wwdc2020/">
						<span>WWDC 2020</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/projects/">
						<span>Projects</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About Me</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/privacy-policy/">
						<span>Privacy Policy</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/AndyIbanezK" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://facebook.com/AndyIbanezCom" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/andyibanez" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	<a href="https://instagram.com/andyibanez" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/andr%c3%a9s-iba%c3%b1ez-30234033" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/648767" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://keybase.io/andyibanez" rel="me"><i class="fab fa-keybase fa-lg" aria-hidden="true"></i></a>
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2021 Andrés Ibañez
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Formatting Relative Dates With RelativeDateTimeFormatter</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Dec 11, 2019
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/development">DEVELOPMENT</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/swift">swift</a>
           
      
          <a class="badge badge-tag" href="/tags/programming">programming</a>
           
      
          <a class="badge badge-tag" href="/tags/apple">apple</a>
           
      
          <a class="badge badge-tag" href="/tags/ios">ios</a>
           
      
          <a class="badge badge-tag" href="/tags/macos">macos</a>
           
      
          <a class="badge badge-tag" href="/tags/tvos">tvos</a>
           
      
          <a class="badge badge-tag" href="/tags/watchos">watchos</a>
           
      
          <a class="badge badge-tag" href="/tags/ipados">ipados</a>
           
      
          <a class="badge badge-tag" href="/tags/ios13">ios13</a>
           
      
          <a class="badge badge-tag" href="/tags/nsformatter">nsformatter</a>
           
      
          <a class="badge badge-tag" href="/tags/relativedatetimeformatter">relativedatetimeformatter</a>
           
      
          <a class="badge badge-tag" href="/tags/wwdc2019">wwdc2019</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 5 min read
</div>


  </header>
  
  
  <div class="post">
    <p>Formatting Relative Dates With RelativeDateTimeFormatter</p>
<p>A few weeks ago we talked about <a href="https://www.andyibanez.com/posts/nsformatter/">formatting content with NSFormatter</a>, an abstract class from which multiple formatting classes inherit from to allow you to format different kinds of data in a human-readable form. <code>NSFormatter</code> is not only a class you can inherit from yourself, but as iOS evolves, more formatters will be added to its family. This week, we will explore a new member of this family introduced in iOS 13: <code>RelativeDateTimeFormatter</code>.</p>
<p>At the time of this writing, there&rsquo;s no documentation on this yet (this article is being written on Dec 2, 2018, so yeah&hellip;), so I will be happy to explore how to use it with you.</p>
<h1 id="relativedatetimeformatter-vs-similar-formatter-classes">RelativeDateTimeFormatter VS. Similar Formatter Classes</h1>
<p>In the article linked above, we already used a formatter that lets you get the relative amount of time between different date times (<code>DateComponentFormatter</code>), so what&rsquo;s the difference with this one?</p>
<p>RelativeDateFormatter allows you to present your users with date time data in an even friendlier manner, being able to show strings such as &ldquo;tomorrow&rdquo; (instead of &ldquo;1d&rdquo;), &ldquo;yesterday&rdquo; (instead of -1d), and even &ldquo;5 minutes ago&rdquo; or &ldquo;in 10 hours&rdquo;.</p>
<h1 id="using-relativedatetimeformatter">Using RelativeDateTimeFormatter</h1>
<h2 id="basic-formatting">Basic Formatting</h2>
<p>Using this new formatter is very easy. It provides three methods which you can use to do the formatting itself:</p>
<ul>
<li><code>localizedString(fromTimeInterval:)</code>: This takes a <code>TimeInterval</code> and formats the difference between the current time in the user&rsquo;s device and the passed interval<!-- raw HTML omitted -->[1]<!-- raw HTML omitted -->.</li>
<li><code>localizedString(for:relativeTo:)</code>: You can use this method to get the time difference between two different dates.</li>
<li><code>localizedString(from:)</code>: This methods takes a <code>DateComponents</code> object, so you can easily construct objects and check their time difference relative to the current time on the device.<!-- raw HTML omitted -->[2]<!-- raw HTML omitted --></li>
</ul>
<h3 id="simple-usage-localizedstringfromtimeinterval">Simple Usage: localizedString(fromTimeInterval:)</h3>
<p>In its simplest form, you can get formatted text out of this formatter with two lines of code. We will use <code>localizedString(fromTimeInterval)</code> to show you how to do this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> relativeDtf = RelativeDateTimeFormatter()
relativeDtf.localizedString(fromTimeInterval: <span style="color:#ae81ff">60.0</span>) <span style="color:#75715e">// &#34;in 1 minute&#34;</span>
</code></pre></div><p>This simple line will print <code>in 1 minute</code> because internally, the formatter will use the device&rsquo;s time, and it will compare it with the time 60 seconds from now.</p>
<p>You can also calculate the time in the past by passing in negative values. If you pass in <code>-60.0</code> to the function, it will print exactly what you expect:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">relativeDtf.localizedString(fromTimeInterval: <span style="color:#f92672">-</span><span style="color:#ae81ff">60.0</span>) <span style="color:#75715e">// prints &#34;1 minute ago&#34;</span>
</code></pre></div><p>Simple enough, right?</p>
<h3 id="difference-between-two-dates">Difference between two dates.</h3>
<p>If you want to calculate the difference between two dates (that do not necessarily involve the device&rsquo;s current time), you can use the <code>localizedString(for:relativeTo:)</code> function.</p>
<p>I cannot find a case where you want to get two unrelated dates and get a relative formatting between them. For example, I can get the difference between my birthday this year (May 20, 2019) and Christmas (May 25, 2019), but the output does not make any sense, contextually:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> andysBday2019 = Date(timeIntervalSince1970: <span style="color:#ae81ff">1558310400.0</span>)
<span style="color:#66d9ef">let</span> christmas2019 = Date(timeIntervalSince1970: <span style="color:#ae81ff">1577232000.0</span>)

<span style="color:#66d9ef">let</span> relativeDtf = RelativeDateTimeFormatter()
relativeDtf.localizedString(<span style="color:#66d9ef">for</span>: andysBday2019, relativeTo: christmas2019) <span style="color:#75715e">// prints &#34;7 months ago&#34; (Was my birthday really 7 months ago?)</span>
</code></pre></div><p>You can probably find a use for it.</p>
<p>Instead, you can use this to calculate the difference between today and another date using <code>Date</code> objects. We will calculate the time between <code>now</code> and Christmas.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> relativeDtf = RelativeDateTimeFormatter()
relativeDtf.localizedString(<span style="color:#66d9ef">for</span>: christmas2019, relativeTo: now) <span style="color:#75715e">// prints &#34;in 3 weeks&#34;</span>
</code></pre></div><p>Using this formatter you can get the relative time difference very easily.</p>
<h2 id="formatter-configuration">Formatter Configuration</h2>
<p>The example we saw so far were simple, and they will probably suit the vast majority of your needs. But you can configure the formatter to spell out the difference, to use abbreviations, and more.</p>
<p>To do this, simply change the formatter&rsquo;s <code>unitsStyle</code> property to any of the following:</p>
<ul>
<li><code>.abbreviated</code>: <em>3 min. ago</em></li>
<li><code>.full</code>: <em>3 minutes ago</em></li>
<li><code>.short</code>: <em>3 min. ago</em> <!-- raw HTML omitted -->[3]<!-- raw HTML omitted --></li>
<li><code>‌.spellOut</code>: <em>three minutes ago</em></li>
</ul>
<p>If you want to quickly see what would a difference look like, you can use this code. It will print your dates in each <code>unitStyle</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> relativeDtf = RelativeDateTimeFormatter()
[
  RelativeDateTimeFormatter.UnitsStyle.abbreviated,
  .full,
  .short,
  .spellOut
  ].forEach {
    <span style="color:#66d9ef">let</span> formatted = relativeDtf.localizedString(<span style="color:#66d9ef">for</span>: threeMinutesAgo, relativeTo: now)
    relativeDtf.unitsStyle = $0
    print(formatted)
}
</code></pre></div><p>You can use other formatting options, such as <code>.formattingContext</code>, which lets you specify where in a sentence would the formatted text appear.</p>
<p>You can also specify a <code>.dateTimeStyle</code>. If you specify <code>.named</code>, you will get something like &ldquo;tomorrow&rdquo;, whereas if you specify <code>.numeric</code>, you will get &ldquo;in 1 day&rdquo;.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">relativeDtf.dateTimeStyle = .named
relativeDtf.unitsStyle = .abbreviated
relativeDtf.localizedString(from: DateComponents(day: <span style="color:#ae81ff">1</span>)) <span style="color:#75715e">// &#34;tomorrow&#34;</span>

relativeDtf.dateTimeStyle = .numeric
relativeDtf.unitsStyle = .abbreviated
relativeDtf.localizedString(from: DateComponents(day: <span style="color:#ae81ff">1</span>)) <span style="color:#75715e">// &#34;in 1 day&#34;</span>
</code></pre></div><h1 id="conclusion">Conclusion</h1>
<p>Formatters are powerful, and as time progresses, we will see more and more. In this article we explored the new <code>RelativeDateTimeFormatter</code> in iOS 13 and how to use it, so you can start implementing friendly texts for your relative date-time strings.</p>
<!-- raw HTML omitted -->
<p>If you find any inaccuracies (and that includes typos) or problems in this article please tweet at me (<a href="https://twitter.com/AndyIbanezK">@AndyIbanezK</a>) or send me an e-mail to andy[at]andyibanez[dot]com. Thank you for helping me improve the quality of my blog!</p>
<p>If there&rsquo;s anything related to Swift, iOS, or another Apple Platform you&rsquo;d like me to cover, feel free to contact me and I will try to cover it in an upcoming article.</p>
<h6 id="foot-notes">Foot Notes</h6>
<p>[1]: I actually don&rsquo;t know if formats the date relative to the user&rsquo;s device. The API is not documented, but that&rsquo;s what I have observed.</p>
<p>[2]: Just like the note above, it&rsquo;s not documented if the formatting occurs relative to the device&rsquo;s time, but my observations point to yes.</p>
<p>[3]: I looked and looked and couldn&rsquo;t find an input that produced something different. Hopefully the docs will be up soon.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/nsuserdefaults-property-wrappers/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">UserDefaults and Property Wrappers</span>
    </a>
    
    
    <a href="/posts/background-execution-in-ios/" class="navigation-next">
      <span class="navigation-tittle">Background Execution on iOS</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    
        <script src="https://utteranc.es/client.js"
        repo="AndyIbanez/andyibanez-com"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-146179797-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/swift.min.js"></script>
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/objectivec.min.js"></script>
            
        
    
    <script type="text/javascript">
        
        hljs.configure({languages: ["swift, objectivec"]});
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
