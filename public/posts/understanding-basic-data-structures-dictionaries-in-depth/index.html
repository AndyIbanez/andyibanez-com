<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.70.0" />

    
    
    

<title>Understanding Basic Data Structures in Swift: Dictionaries in Depth • Andy Ibanez</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Understanding Basic Data Structures in Swift: Dictionaries in Depth"/>
<meta name="twitter:description" content="Get a deeper understanding of what dictionaries are and the theory behind them."/>

<meta property="og:title" content="Understanding Basic Data Structures in Swift: Dictionaries in Depth" />
<meta property="og:description" content="Get a deeper understanding of what dictionaries are and the theory behind them." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.andyibanez.com/posts/understanding-basic-data-structures-dictionaries-in-depth/" />
<meta property="article:published_time" content="2021-01-27T07:00:00-04:00" />
<meta property="article:modified_time" content="2021-01-27T07:00:00-04:00" /><meta property="og:site_name" content="Andy Ibanez - iOS Developer" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.e4368406c047b72036bd31fdf69f74f805156724914c166a0accb2369a218b61.css" integrity="sha256-5DaEBsBHtyA2vTH99p90&#43;AUVZySRTBZqCsyyNpohi2E=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    <script data-ad-client="ca-pub-3640551804216350" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-146179797-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://www.andyibanez.com">Andy Ibanez</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/196dd48d2ac425661edf58028d499370?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Software Developer from La Paz, Bolivia. Programming for iOS since 2011. 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Andy Ibanez</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/tags/wwdc2020/">
						<span>WWDC 2020</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/projects/">
						<span>Projects</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About Me</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/privacy-policy/">
						<span>Privacy Policy</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/AndyIbanezK" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://facebook.com/AndyIbanezCom" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/andyibanez" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	<a href="https://instagram.com/andyibanez" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/andr%c3%a9s-iba%c3%b1ez-30234033" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/648767" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://keybase.io/andyibanez" rel="me"><i class="fab fa-keybase fa-lg" aria-hidden="true"></i></a>
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2021 Andrés Ibañez
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Understanding Basic Data Structures in Swift: Dictionaries in Depth</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Jan 27, 2021
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/development">DEVELOPMENT</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/swift">swift</a>
           
      
          <a class="badge badge-tag" href="/tags/apple">apple</a>
           
      
          <a class="badge badge-tag" href="/tags/dictionary">dictionary</a>
           
      
          <a class="badge badge-tag" href="/tags/data-structures">data structures</a>
           
      
          <a class="badge badge-tag" href="/tags/data">data</a>
           
      
          <a class="badge badge-tag" href="/tags/structures">structures</a>
           
      
          <a class="badge badge-tag" href="/tags/foundation">foundation</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 5 min read
</div>


  </header>
  
  
  <div class="post">
    <p>Whether you are a seasoned developer with a lot of code out in the wild world, or you started learning programming this week, chances are you hace used (and seen) dictionaries being used in many places. Also known as <em>hashmaps</em> or <em>hash tables</em>, dictionaries allow us to store <em>key-value</em> mappings, from one object to another.</p>
<p>In this article we will study this structure which is known by everyone, and we will also learn about its quirks and unknown features.</p>
<h1 id="dictionary-basics">Dictionary Basics</h1>
<p>Dictionaries map keys with values. Similar to an array, but instead of using numerical indexes, they use a <em>Hashable</em> as the key. For the vast majority of cases, this Hashable is a string. Each has is unique, and a dictionary cannot store the same key twice pointing to a different object. In fact, try running this somewhere:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">let</span> dollDic = [
  <span style="color:#e6db74">&#34;Pullip&#34;</span>: <span style="color:#e6db74">&#34;Classical Alice&#34;</span>,
  <span style="color:#e6db74">&#34;Pullip&#34;</span>: <span style="color:#e6db74">&#34;Eileen&#34;</span>
]
</code></pre></div><p>Dictionary literals can do a lot of checking beforehand. You will see an error similar to the one below:</p>
<blockquote>
<p>Fatal error: Dictionary literal contains duplicate keys: file Swift/Dictionary.swift, line 826</p>
</blockquote>
<p>When you attempt to set the same existing value at runtime, your code will not crash. Instead, it will replace the old one:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> dollDic = [
  <span style="color:#e6db74">&#34;Pullip&#34;</span>: <span style="color:#e6db74">&#34;Classical Alice&#34;</span>
]

dollDic[<span style="color:#e6db74">&#34;Pullip&#34;</span>] = <span style="color:#e6db74">&#34;Eileen&#34;</span>

print(dollDic[<span style="color:#e6db74">&#34;Pullip&#34;</span>]) <span style="color:#75715e">// Eileen</span>
</code></pre></div><h2 id="keys-order">Keys Order</h2>
<p>One question I see being asked very often is, why aren&rsquo;t the keys of a dictionary ordered when I print them or try to access them? Why are the keys in a different order every time I print an app?</p>
<p>There is nothing in the definition of a dictionary (or a hashmap) that guarantees an order for the keys. As part of the <em>hash</em> part, there is no way to make a guarantee of the order.</p>
<p>The <em>hash</em> is a calculated value. Dictionary keys get &ldquo;converted&rdquo; to a hash at runtime. Ultimately, dictionaries are <em>hash tables</em>, and that means that they need a very fast access of their index. Whatever you want to use as a key, is likely to be slow, so converting it to a hash ensures quick lookup in the table to retrieve it or store something new. Because keys are converted to hashes for lookup, the table does not keep track of the original keys*. Instead, the keys may look like random data, but they are the result of an operation to make hash table lookup very quick.</p>
<p><em>*: While you can access the keys in Swift and they are not lost forever, the definition of a dictionary still does not guarantee any order. In Swift, you can access the keys by calling the <code>keys</code> property on a dictionary. This will return an array of the keys.</em></p>
<h2 id="keeping-a-dictionary-order">Keeping a dictionary order</h2>
<p>With all that said, there may be times in which you do need to keep a certain order to your keys after all.</p>
<p>The first method is to call the <code>keys</code> property of a dictionary. This will return an array with the keys. this is an array you can sort and use that to access your dictionary.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> directory = [
  <span style="color:#e6db74">&#34;e&#34;</span>: <span style="color:#e6db74">&#34;Eileen&#34;</span>,
  <span style="color:#e6db74">&#34;b&#34;</span>: <span style="color:#e6db74">&#34;Bloody Red Hood&#34;</span>,
  <span style="color:#e6db74">&#34;a&#34;</span>: <span style="color:#e6db74">&#34;Alice&#34;</span>,
]

<span style="color:#66d9ef">let</span> keys = directory.keys.sorted()

keys.forEach { print(directory[$0]) }
</code></pre></div><p>Once you have your keys, you can sort them any way you like, and then just iterating over them and accessing the dictionary in that order will give you the results you want.</p>
<pre><code>Alice
Bloody Red Hood
Eileen
</code></pre><h2 id="introducing-keyvaluepairs">Introducing KeyValuePairs</h2>
<p>But, there is a lesser known type in the Swift library called <a href="https://developer.apple.com/documentation/swift/keyvaluepairs"><code>KeyValuePairs</code></a>. This object is a <em>key-value</em> store just like dictionaries, with the main difference being that the collection is ordered since the beginning, but another important difference is that this is not a <em>hash table</em>, so lookup is not as fast. While you are not likely to hit any constraints in most modern computing systems, do keep in mind that performance when using <code>KeyValuePairs</code> is worse.</p>
<p>The easiest way to initialize a <code>KeyValuePair</code> is to declare your variable of type <code>KeyValuePair</code> and then giving it a dictionary literal.</p>
<p>To be clear and avoid any confusion, the <code>KeyValuePair</code> will not accept anything and return it sorted for you. instead, it just means that it will keep the items in the order you gave them.</p>
<p>Also keep in mind that there is no guarantee that the keys will be unique. In fact this is perfectly valid:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">var</span> directory: KeyValuePairs = [
  <span style="color:#e6db74">&#34;e&#34;</span>: <span style="color:#e6db74">&#34;Eileen&#34;</span>,
  <span style="color:#e6db74">&#34;b&#34;</span>: <span style="color:#e6db74">&#34;Bloody Red Hood&#34;</span>,
  <span style="color:#e6db74">&#34;a&#34;</span>: <span style="color:#e6db74">&#34;Alice&#34;</span>,
  <span style="color:#e6db74">&#34;b&#34;</span>: <span style="color:#e6db74">&#34;Betty&#34;</span>
]


directory.forEach { <span style="color:#66d9ef">_</span>, value <span style="color:#66d9ef">in</span> print(value) }
</code></pre></div><pre><code>Eileen
Bloody Red Hood
Alice
Betty
</code></pre><p>Perhaps the reason this object isn&rsquo;t very well known is because ultimately, it&rsquo;s not really useful. You can get the same benefits just using a an array of <code>(String, String)</code> objects and prevent your codebase from getting polluted with lesser known objects.</p>
<h1 id="hashable-implementation">Hashable Implementation</h1>
<p>While not very common, it&rsquo;s possible you may want to create your own keys for a dictionary.</p>
<p><code>Hashable</code> is a protocol with very few requirements.</p>
<p>All you need to do is implement the <code>hashValue: Int</code> property.</p>
<p>The hash of an object has to be unique per run of the app. It doesn&rsquo;t even have to be the same across consistent launches. Generally when I need to create my own Hashables, I try my best to user an underlying properly to supply it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Doll</span>: Hashable {
  <span style="color:#66d9ef">let</span> name: String
  <span style="color:#66d9ef">let</span> maker: String
  
  <span style="color:#66d9ef">var</span> hashValue: Int {
    name.hashValue
  }
}

<span style="color:#66d9ef">let</span> alice = Doll(name: <span style="color:#e6db74">&#34;Classical Alice&#34;</span>, maker: <span style="color:#e6db74">&#34;Pullip&#34;</span>)
<span style="color:#66d9ef">let</span> delia = Doll(name: <span style="color:#e6db74">&#34;Delia&#34;</span>, maker: <span style="color:#e6db74">&#34;Myou&#34;</span>)

<span style="color:#66d9ef">let</span> dollCount = [alice: <span style="color:#ae81ff">2</span>, delia: <span style="color:#ae81ff">3</span>]
</code></pre></div><p>In the example above, I&rsquo;m using the <code>name</code> property&rsquo;s <code>hashValue</code> as the hash for my object. Sometimes this will help you build more obvious code, but make sure you don&rsquo;t over-engineer on top of this.</p>
<h1 id="conclusion">Conclusion</h1>
<p>Dictionaries are very common, in all programming languages, all over the world. Understanding the gotchas is important, and the features Swift provides for them are worthwhile a bit more study.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/understanding-basic-data-structures-swift-sets/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Understanding Basic Data Structures in Swift: Sets</span>
    </a>
    
    
    <a href="/posts/nil-null-mess-objective-c-and-swift/" class="navigation-next">
      <span class="navigation-tittle">nil-null-mess in Objective-C and Swift</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    
        <script src="https://utteranc.es/client.js"
        repo="AndyIbanez/andyibanez-com"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-146179797-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/swift.min.js"></script>
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/objectivec.min.js"></script>
            
        
    
    <script type="text/javascript">
        
        hljs.configure({languages: ["swift, objectivec"]});
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
